language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: yeFOphJFlCeUhndzaLg3IM48nJ2IpKzWkIj2uF75WvRUP7X91nBU+/CQMdxP5/GPBKNdtDq/bBA9r7uu5YS46ioXFxZKtMheMBLLa9opOXTOHQqRgsjatueuMK/IngZIBlNZvlB8MN8GsZ2k93oOxnriuUoT/MFp558LXvECgv2/UT5/eTHqq9m6tk34Bb1CPN3BKiLKi7Elozi5D022jjQGQqsQQBOde/vgFExEM1uKrBipJEDd8IdkI3aJd2F2X51gRFwe224hsnMqJybMAlSITrrfcuxJy1+CFLkWOIa1EgGkym9QQE/zi9dwO1j/FSNNDdxzEhqwxe/pK7jgZFRRXEe8AsQqcxh6CZsQECzj4ZMNcqtSF/wztTaKMtRrFIwkulO4buhFHtypMQJ8HMwx1mQlZCJ0ZYQndI6+cGp9W7UKA8Atu1jLzP9nC17kDauvt0wlpbrBVVbEbDDoZDhaB01mDbVCHwBkdiGPwfQU8FcDqdTZCQgaPJv6U9Hb4m72WL/wQs3jQ55K2Qr+GEJpbu4eWPrBeTOqIVmaUvVvGvtMvjTHny0VdSf993gwd1bi88ACDPcqEKik96V7FBAnm3xfCTJaD1ZF9gvsIaT9/Vbr/iTe9I8Y0VCNxXviMw+R0D3wiuM83KFXMqKYnD8o6K0yKU69Cz+YdwePEvg=
  - secure: SgpfUemP3qSlRWVVVX7aT6vqfQ1T+rT1dHDNOevp8p741USC0m0vZTSkOz8YzaPT+KC8ckDnQ5K7N6twMtjiYlRdVFC5MiXMpey44einM6EN9fTbZh5zqwy2ymPPvMWQbLlw8GaD3Dxg17un4UZRR1vNbA2tH0OThPe+pR71sxsG9O9vG/TfGtlf9IOQ8o7yFLE5z3luUnJIqbSwBdOdlX7t7mnSMdySx0FBj0bUJvZDE/hVl/OFfaSYSXNJtv7p9wCyaRhYEn0KymcEqlaBaWJW0tr76L/x3ADj8+vW0DkfTvhgCX41MQskV42mzcp/96Jhu2Xmd2fXFetfNwru37GZHdRuRArNtGFzEBHK6FSoylRYgyMnrIkVQeX31hFYpVr2HPRglP0x5Df1UXvZReWQaPok7GZyirGK5mXHVgU3FzN6pQtV/yd8A9ZlMTYCYn79g7WPHO0wazz9YbqSPxvC40ySGZMHgnPSYCGon6pn/yj7PGBooY6e6N5ORZDE8emuu7RKVQEt0XeIuPjAWlNsG2fytZZCXx6wgcT6/G70LctXL/C1Tv6ZIhjg1+vdcfQYC6FIdhEoRf6I5PoA5BoDeTu26jrfp9yohCciZKfIQ2sxsK5bB3k09UsW5cPW9ESVdc9aBQ4flPzo6V5Z4+OkaeJUdJ+tasdA4gdLMpI=
  - secure: nFDpaindFGRFQD/LWnm+e0H7eiAAtLKT+K+PlnKdhzKC2/g1rIUiUrlnX/cenRQMlx3uSU6qpU89dgJPvgsMozwaigbm9HHr+kAY8z8jf3PTzhRiwtKXpaKQEB7ndfYYDB2kSG2xTZ3P6PSTxRfuROHudEPq08lXkpzGw+uzMmWUhA+oZOPbT7ZzqwGVWZeqSFQE5wMRvwUmI37xmot2sh85uGSUejlBQSheQ6rCOZS37XUeoJFDHmXMDswcz7aI5gHA/I7+P0bMuDLaTo41io/P7hErTb/4PzUfUL7aFk7WRfMCWUT/gg62pdyXkhL/0qdNuHHDRTmcilEBrAM1gdVnMFUvsdfGtqKWcMqjUcNGbVCPB8lpQwaED5XT/CHRnWchfGomKNjVycfM47qzGspt7YJGVr1DF5VvS9TAuuY9u2ppBqQpEAq8mOomLudefwbuAuccfXU/PvAyZrmKk+Wj/5at4++8KULbYcwQ7BHYLVVI3KsUJNoQQtCrSe0pUyHsxfqpyZcd7AaJ3RMEOBX0gZg5yg9xFnrsQRhH5+Y0uSdxC0nXGgQiL7fEefe/ds4Zmm3dJvaKk6tKKTvUVjXEufPkTTagQdP2VVl7oB+dzM3jyN+pxnc5ank6njRFdiVmkVmMOJohrJM8AiuxK//Fr+XMfaDqbGgW0fSY0Y0=
script:
- ls -alh
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/plex
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: rBXgqEg9FojjL2qBohU599HnmFdExSXo4wEnt5iT7W8/cl2LWutWqeMuqIHt0AskZ0whf/wK7UmJ/TYp5CRTWmg09HUA6X+twO5LM3iS2nNI8+7LJ8RgeqAmvrndUwzkgK9us+NLjeW81CMxqahAQvbu7aqvJrWq1k9gYebLyywjuhNVATv1fETghByY3+kYdm7ZuVXsJd3uZ+tBh+nnBxD0PQ8asJxBGNUj7HudSxF5zeIZ6gMx+wqmdNHEJDdYouYmml7pb3JbmGuKcMftNf2heXLG9v5FX+r+9LRY7bEam0HLINkyDIqZHVG903tChe3+MkQAkgBBHninUgjTioTcVGspZ120/+sKTsWzQqiHdkhlJVNZjPoA5vO3FjXlafAaBcnvqTo3m1PDhvjYb3ZSRhm14F/ZIYfLVsALbSoLRQMrUPTp9lvZCuiNPAavwoxgV0T6S8DsySbhkCFtrkYBFLS9fIpWCEHDteiFOceJs8kL56a1h+wjzey8NAFojhTrA35nMZvVlgsOMuetNyacBWmmDqIOx1+933ZBhTtM6jYrb4l9kP2aFouHqoY4/JcNhTF+RgIY41lzYrWhmpyhCaO+icikETvtmyoZHRbZ0Rv4BP8VEOXRINNeF0u8uv+0MOuZykV9Th5KM5XRGfsZRRpZU1sm5CKseiLfku8=
